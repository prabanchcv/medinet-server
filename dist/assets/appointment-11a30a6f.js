import{c as M,u as A,b as u,r as i,j as e,t as C,L as E,B as L,a as B,f as g,s as _}from"./index-ec28138e.js";/* empty css                    */function P(){var j;const N=M(),l=A(),t=u(s=>s.selectedDoc.doc),a=u(s=>s.user.data),[f,v]=i.useState([]),[d,y]=i.useState(new Date),[o,b]=i.useState("Time"),[r,S]=i.useState(""),[m,h]=i.useState(["No data"]),[x,w]=i.useState(""),p=localStorage.getItem("userToken");i.useEffect(()=>{async function s(){t.doctorData?await B.get(`https://medinet.website/docSchedule/${t._id}`,{headers:{Authorization:`Bearer ${p}`}}).then(n=>{console.log(n.data),n.data==="blocked"?(l("/login"),localStorage.removeItem("userToken")):v(n.data)}):l("/findDoctor")}s()},[t._id,t.doctorData,l,p]);const D=s=>{console.log(s),y(s);const n=g(s,"dd-MM-yyyy");console.log(n);const c=f.filter(T=>T.date.slice(0,10)===n);c.length>0&&c[0].time?(console.log(c[0].time),h(c[0].time)):(h(["No available time for this day"]),console.error("Error: Could not find time for the selected date"))},k=async()=>{if(d===""||o==="Time")S("Please select session date and time");else{const s={doctor:t._id,user:a._id,date:g(d,"dd-MM-yyyy"),time:o,issues:x,fee:t.fee};N(_(s)),l("/payment")}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:" slice mx-auto text-center mt-5 p-4 app-div",style:{maxWidth:"800px"},children:[r?e.jsx("div",{className:"mt-3 alert-danger alert",children:r}):"",e.jsx("h3",{children:e.jsx("b",{children:" Book Your Appointments"})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 mt-5 text-center",children:e.jsx("h4",{children:e.jsx("b",{children:"Patient Details"})})}),e.jsxs("div",{className:"col-5   text-end",children:[e.jsx("p",{children:" Name :"}),e.jsx("p",{children:" Age :"}),e.jsx("p",{children:" Gender :"}),e.jsx("p",{children:" Address :"}),e.jsx("p",{children:"Health issues :"})]}),e.jsxs("div",{className:"col-7",children:[e.jsx("p",{children:a.userName?a.userName:" "}),e.jsx("p",{children:a==null?void 0:a.age}),e.jsx("p",{children:a.gender?a.gender:" "}),e.jsx("p",{children:a.address?a.address:" "}),e.jsx("textarea",{name:"issues",id:"",value:x,onChange:s=>w(s.target.value),className:"form-control",cols:"30",rows:"5",placeholder:"Enter your health issues here..."})]})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 mt-5 text-center",children:e.jsx("h4",{children:e.jsx("b",{children:"Doctor Details"})})}),e.jsxs("div",{className:"col-12 text-center",children:[e.jsxs("h5",{children:["Dr.",t==null?void 0:t.name]}),e.jsx("div",{className:"text-secondary",children:t.doctorData?(j=t==null?void 0:t.doctorData[0])==null?void 0:j.name:""}),e.jsx("div",{className:"text-secondary",children:t==null?void 0:t.qualification}),e.jsx("div",{children:e.jsxs("b",{children:["Fee : ",e.jsx("span",{className:"text-success",children:t.fee})]})}),e.jsxs("div",{className:"",children:[e.jsx("b",{children:"Session Timing "}),e.jsx("div",{className:"dropdown",children:e.jsx(C,{selected:d,onChange:s=>D(s),dateFormat:"yyyy-MM-dd",minDate:new Date})}),e.jsxs("div",{className:"dropdown",children:[e.jsx("button",{className:"btn drpp p-1 bg-light btn-outline-dark mt-2  text-dark dropdown-toggle",style:{maxWidth:"150px",minWidth:"100px",fontSize:"14px"},type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:o}),e.jsx("ul",{className:"dateDrop dropdown-menu",children:m&&m.map((s,n)=>e.jsx("li",{children:e.jsx(E,{className:"appLink",onClick:()=>b(s),children:s})},n))})]})]})]})]})}),e.jsx("div",{className:"col-12 mt-4 d-flex justify-content-center align-items-center",children:e.jsxs("button",{className:"btn p-1 btn-outline-success",onClick:k,children:["Book Appointment ",e.jsx(L,{style:{marginTop:"-2px"}})]})})]})]})})}export{P as default};
